

<script src="/js/metodos.js"></script>
<script src="/microservicios/metod.js"></script>
<script>


    $(document).ready(function () {
        $("#horass").hide();
        $("#fechass").hide();

        var a = recorrerSelect(document.getElementById("horass"));
        var b = recorrerSelect(document.getElementById("horario"));
        console.log(a);
        console.log(b);
        var c = recorrerSelect(document.getElementById("fechass"));
        console.log(c);


        //var c = recorrerSelect(document.getElementById("fechass"));
        $("#horario").change(function () {
            var verFecha = $("#fecha").val();
            var horas = $("#horario").val();
            contieneValor(c, verFecha);
            if (contieneValor(c, verFecha) == verFecha && contieneValor(a, horas) == horas) {
                alert("Hora ya contiene cita, seleccione otra hora")
                $("select option[value='" + horas + "']").prop("disabled", true);

            }
        });

        //valoresIguales(b, a);
        $("#fecha").change(function () {
            var f = $("#fecha").val();
            console.log("fecha seleecionada:" + f);
            contieneValor(c, f);
        });

        fechaActual();
        selectColor();
        fechasPasadas();
        nuevaFecha();
        $("#fecha").change(function () {
            selectColor();
        });
        function nuevaFecha() {
            if (!obtenerHora()) {
                console.log("logica");
                if (fechaActual() == fechaActual()) {
                    fechaSiguiente($("#fecha").val());
                }
            }
        }
        $("#genCit").click(function () {
            $("#valor").val("true")
        });
    });
    llenarComboServicio();
    
        $("#servicioA").click(function () {
        alert($(this).attr("id"))
    });




    //$("select option[value='8:00-8:30']").css("background-color", "#F07979");
</script>

<section class="site-section bg-white " id="testimonials-section" data-aos="fade">
    <div class="container">
        <div class="form-group">
            <a href="/" class=" btn btn-outline-primary ml-auto float-rigth" title="agregar discusion">Regresar</a>
        </div>
        {{#if registro}}
        <h1 class="text-center">{{title}}</h1>
        <div class="row">

            <div class="card align-self-center" style="width:300px">
                <div class="card-header btn-succses">
                    <div class="card-title text-center">
                        <p class="card-text">
                        <h4>Datos Cliente</h4><input type="hidden" value="{{cliente.id}}" id="idCliente" name="idCliente" />
                        </p>
                        <select id="horass" >
                            {{#each citas}}
                            <option value="{{hora}}">{{hora}}</option>
                            {{/each}}
                        </select>
                        <select id="fechass">
                            {{#each citas}}
                            <option value="{{fecha}}">{{fecha}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="cedula">Cedula</label>
                        <input type="text" class="form-control" value="{{cliente.cedula}}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="nombres">Nombres:</label>
                        <input type="text" class="form-control" value="{{cliente.nombres}} {{cliente.apellidos}}" name="nombreCliente" readonly>
                    </div>
                    <div class="form-group">
                        <label for="direccion">Direccion:</label>
                        <input type="text" class="form-control" value="{{cliente.direccion}}" readonly>
                    </div>
                </div>
            </div>




            <div class="col-md-1"> </div>
            <div class="card" style="width:700px">
                <div class="card-header btn-succses">
                    <div class="card-title text-center">
                        <div class="card-header bg-light">
                            <h5>DATOS CITA MEDICA</h5>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <form action="/cliente/cita/agendar" method="POST" class="form-box" id="formulario">
                            <label class="text-black">Seleccione su mascota</label>
                            <select class="form-control" id="mascota" name="mascota">
                                {{#each mascota}}
                                <option value="{{nombre}}"> {{nombre}} </option>
                                {{/each}}
                            </select>
                            <label class="text-black" for="exampleFormControlSelect2">Seleccione el servicio</label>
                            <div class="form-group">
                                <select class="form-control" name="servicio" id="servicioA">
                                </select>
                                <input id="valorMicro" name="valorMicro" value="" />

                            </div>
                            <label class="text-black" for="exampleFormControlSelect2">Forma de pago</label>
                            <div class="form-group">

                                <select class="form-control" name="tPago" id="tPago">
                                    <option value="online"> En linea</option>
                                    <option value="efectivo">Efectivo </option>
                                </select>
                                <hr>
                                <form>
                                    <div class="form-group owner">
                                        <label for="owner">Titular</label>
                                        <input type="text" class="form-control" id="owner">
                                    </div>
                                    <div class="form-group CVV">
                                        <label for="cvv">CVV</label>
                                        <input type="text" class="form-control" id="cvv">
                                    </div>
                                    <div class="form-group" id="card-number-field">
                                        <label for="cardNumber">Numero Tarjeta</label>
                                        <input type="text" class="form-control" id="cardNumber">
                                    </div>
                                    <div class="form-group" id="expiration-date">
                                        <label>Fecha Expiracion</label>
                                        <select>
                                            <option value="01">Enero</option>
                                            <option value="02">Febrero </option>
                                            <option value="03">Marzo</option>
                                            <option value="04">Abril</option>
                                            <option value="05">Mayo</option>
                                            <option value="06">Junio</option>
                                            <option value="07">Julio</option>
                                            <option value="08">Agosto</option>
                                            <option value="09">Septiembre</option>
                                            <option value="10">Octubre</option>
                                            <option value="11">Noviembre</option>
                                            <option value="12">Diciembre</option>
                                        </select>
                                        <select>
                                            <option value="19"> 2019</option>
                                            <option value="20"> 2020</option>
                                            <option value="21"> 2021</option>
                                            <option value="22"> 2022</option>
                                            <option value="23"> 2023</option>
                                            <option value="24"> 2024</option>
                                        </select>
                                    </div>
                                    <div class="form-group" id="credit_cards">
                                        <img src="/images/visa.jpg" id="visa">
                                        <img src="/images/mastercard.jpg" id="mastercard">
                                        <img src="/images/amex.jpg" id="amex">
                                    </div>
                                    <div class="form-group" id="pay-now">
                                        <button type="submit" class="btn btn-default" id="confirm-purchase">Confirmar</button>
                                        <a href="/" class="btn btn-danger btn-pill">Volver</a>
                                    </div>
                                </form>
                                <hr>
                            </div>
                            <label class="text-black" for="fecha">Seleccione la fecha</label>

                            <div class="form-group">
                                <input type="date" id="fecha" name="fecha" class="form-control">
                            </div>
                            <div class="form-group">
                                <label class="text-black" for="exampleFormControlSelect2">Seleccione hora</label>
                                <select multiple class="form-control text-black dropdown-secondary" id="inf" size="8">

                                </select>
                                <select multiple class="form-control text-black dropdown-secondary" name="hora" id="horario" size="8">
                                    <option value="8:00-8:30" id="h1">8:00-8:30</option>
                                    <option value="8:30-9:00" id="h2">8:30-9:00</option>
                                    <option value="9:00-9:30" id="h3">9:00-9:30</option>
                                    <option value="9:30-10:00" id="h4">9:30-10:00</option>
                                    <option value="10:00-10:30" id="h5">10:00-10:30</option>
                                    <option value="10:30-11:00" id="h6">10:30-11:00</option>
                                    <option value="11:00-11:30" id="h7">11:00-11:30</option>
                                    <option value="11:30-12:00" id="h8">11:30-12:00</option>
                                    <option value="12:00-12:30" id="h9">12:00-12:30</option>
                                    <option value="almuerzo" disabled=""  >Hora de almuerzo</option>
                                    <option value="15:00-15:30" id="h10">15:00-15:30</option>
                                    <option value="15:30-16:00" id="h11">15:30-16:00</option>
                                    <option value="16:00-16:30" id="h12">16:00-16:30</option>
                                    <option value="16:30-17:00" id="h13">16:30-17:00</option>
                                    <option value="16:00-16:30" id="h14">17:00-17:30</option>
                                    <option value="16:30-17:00" id="h15">17:30-18:00</option>
                                    <option value="16:00-16:30" id="h16">18:00-18:30</option>
                                </select>
                            </div>
                            <input id="valor" type="hidden" value="false" name="valor">
                            <div class="alert alert-info" role="alert">
                                Estimado(a) {{cliente.nombres}} {{cliente.apellidos}} una vez agendada tu cita no podras modificar los datos de la misma
                            </div>
                            <div class="form-group">
                                <input type="submit" id="bcita" class="btn btn-primary btn-pill" value="Generar Cita" id="genCit">
                                <input type="button" id="bPago" class="btn btn-primary btn-pill" value="">
<!--<a href="/pago/{{valor}}" class="btn btn-danger btn-pill">Volver</a>-->
                                <a href="/" class="btn btn-danger btn-pill">Volver</a>
                            </div>
                        </form>

                    </div>
                </div>
            </div>

        </div>
        {{/if}}
        {{#unless registro}}
        <h1>Aun no tiene mascotas registradas</h1>
        {{/unless}}

    </div>
</section>

    